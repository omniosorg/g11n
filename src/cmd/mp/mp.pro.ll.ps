%!PS-Adobe-1.0
%%
%% CDDL HEADER START
%%
%% The contents of this file are subject to the terms of the
%% Common Development and Distribution License (the "License").  
%% You may not use this file except in compliance with the License.
%%
%% You can obtain a copy of the license at src/OPENSOLARIS.LICENSE
%% or http://www.opensolaris.org/os/licensing.
%% See the License for the specific language governing permissions
%% and limitations under the License.
%%
%% When distributing Covered Code, include this CDDL HEADER in each
%% file and include the License file at src/OPENSOLARIS.LICENSE.
%% If applicable, add the following below this CDDL HEADER, with the
%% fields enclosed by brackets "[]" replaced with your own identifying
%% information: Portions Copyright [yyyy] [name of copyright owner]
%%
%% CDDL HEADER END
%%
%%
%% Copyright 2003 Sun Microsystems, Inc.  All rights reserved.
%% Use is subject to license terms.
%%

%%Creator: Suresh Chandrasekharan
%%Title: @(#)mp.pro.ll.ps 3.1 01/11/06
%%CreationDate: see above
%%PageLength 60
%%LineLength 160
%%NumCols 1
%%DocumentFonts: Times-Bold Times-Roman Courier
%%Pages: (atend)
%%EndComments

/fontHd_size 14 def
/fontH2_size 10 def
/fontNd_size 12 def

/setmargin {
  /leftedge 0 def
  /bottomedge 0 def
  fullheight fullwidth LandscapeMode { exch } if
    /rightedge exch def
    /topedge exch def
  9 7 LandscapeMode { exch } if pop
    /FontSize exch def

  0 localeprolog eq
  {
  /font1d /Times-Bold           reencodeISO
  /font2d /Times-Roman          reencodeISO
  /CourierISO /Courier          reencodeISO
  /fontHd /Helvetica-BoldOblique        reencodeISO
  /fontH2 /Helvetica-BoldOblique        reencodeISO
  /fontNd /Times-Bold           reencodeISO
  /font3d backspacefont
  /BoldFont      { /font1d findfont FontSize scalefont setfont } def
  /pf            { /font2d findfont FontSize scalefont setfont } def
  /sf            { /font3d findfont FontSize scalefont setfont } def
  /fontH         { /fontHd findfont fontHd_size scalefont setfont } def
  /fontD         { /fontH2 findfont fontH2_size scalefont setfont } def
  /fontN         { /fontNd findfont fontNd_size scalefont setfont } def
  }
  {
  /font1d /LC_Times-Bold def
  /font2d /LC_Times-Roman def
  /CourierISO /LC_Courier def
  /fontHd /LC_Helvetica-BoldOblique def
  /fontH2 /LC_Helvetica-BoldOblique def
  /fontNd /LC_Times-Bold def
  /font3d /LC_Courier def
  /BoldFont      { font1d findfont FontSize scalefont setfont } def
  /pf            { font2d findfont FontSize scalefont setfont } def
  /sf            { font3d findfont FontSize scalefont setfont } def
  /fontH         { fontHd findfont fontHd_size scalefont setfont } def
  /fontD         { fontH2 findfont fontH2_size scalefont setfont } def
  /fontN         { fontNd findfont fontNd_size scalefont setfont } def
  }
  ifelse

} def

/graybox	% grey x1 y1 x2 y2 graybox --
{
    newpath
      4 -1 roll 2 copy			% y2 x1
      10 sub exch moveto
      4 -1 roll 2 copy			% x1 y1
      10 180 270 arc
      4 -1 roll 1 copy 3 -1 roll	% x2 y1
      10 270 0 arc
      3 -1 roll 1 copy 3 1 roll		% x1 y2 x2 y2
      10 0 90 arc
      10 90 180 arc
    closepath
    gsave
      setgray fill
    grestore
    0 setgray stroke
} def

/dobanners
{
  gsave
    % listing type, user, date across the bottom
    0.88                                % gray level
    leftedge  50 add topedge 56 sub     % bottom lt corner
    rightedge 95 sub topedge 36 sub     % top rt corner
    graybox
    leftedge 50 add topedge 50 sub moveto
    fontD
    MailFor show
    fontH
    User show
    fontD
    rightedge 95 sub TimeNow stringwidth pop sub
    topedge 52 sub moveto TimeNow show
    % page number to the bottom right corner
    1                                   % gray level
    rightedge 70 sub topedge 56 sub     % bottom lt
    rightedge 50 sub topedge 36 sub     % top rt
    graybox
    fontD
    (Page) dup stringwidth
       topedge 40 sub exch sub                  % y-centered
       exch 2 div rightedge 60 sub exch sub     % x-centered
       exch moveto show
    fontH
    dup stringwidth
       topedge 58 sub exch sub                  % y-centered
       exch 2 div rightedge 60 sub exch sub     % x-centered
       exch moveto show
    0.88                                   % gray level
    leftedge  50 add bottomedge 50 add     % bottom lt corner
    rightedge 50 sub bottomedge 70 add     % top rt corner
    graybox
    fontH
    % compute x pos for centring
      % ((l+50) + (r-50)) / 2 is the page centre
      leftedge rightedge add 2 div
      % but we want to start at the beginning of the string, not the middle
      Subject stringwidth pop 2 div sub
    % y pos is simple
      bottomedge 54 add
      moveto
    mysub
    HeadingDict /mysubdef known not
    { Subject show }
    if
  grestore
} def

/endpage		% page_number endpage --
{
  nodecorations  not
  { dobanners }
  if
  showpage		% display it
} def


/endcol			% page_number col_number endcol --
{
  pop			% get rid of col_number
  pop                   % get rid of page_number
  /ypos topedge 82 sub def
  /xpos rightedge leftedge sub 2 div def
  /ypos ypos 0.7 FontSize mul  sub def
  xpos ypos moveto
} def

/newpage	% page_number newpage --
{
  pop		% pageno
%  /PageSave save def
  LandscapeMode {setlandscape} if
  /lct 0 def
  /ypos topedge 85 sub def
  /xpos leftedge 50 add def
  /ypos ypos 0.8 FontSize mul  sub def
  xpos ypos moveto
  sf
} def

/setlandscape
{
  612 0 translate
  90 rotate
} def

/showline
{
  show
  /ypos ypos FontSize sub def
  xpos ypos moveto
} def

% see the trouble shooting section in the README for details on setscreen.
106 45 {dup mul exch dup mul add 1.0 exch sub} setscreen

/LandscapeMode true def

setmargin
